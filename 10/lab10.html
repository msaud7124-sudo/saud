<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lab 10 — Advanced JavaScript</title>

<style>
  :root{
    font-family: Arial, sans-serif;
    --gap: 12px;
  }

  body{
    margin:20px;
  }

  header{
    margin-bottom:20px;
  }

  .controls{
    display:flex;
    flex-wrap:wrap;
    gap:var(--gap);
    align-items:center;
    margin-top:8px;
  }

  .controls label{
    display:flex;
    gap:6px;
    align-items:center;
  }

  .products-grid{
    display:grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap:16px;
  }

  .card{
    border:1px solid #ddd;
    border-radius:8px;
    padding:12px;
    text-align:center;
  }

  .card img{
    width:100%;
    height:120px;
    object-fit:cover;
    border-radius:6px;
  }

  .card h3{
    margin:8px 0 6px;
    font-size:16px;
  }

  .card p{
    margin:4px 0;
    color:#444;
  }
</style>
</head>

<body>
<header>
  <h1>Product List (Lab 10)</h1>

  <div class="controls">
    <label>
      Category:
      <select id="categoryFilter">
        <option value="all">All</option>
      </select>
    </label>

    <label>
      Min Price:
      <input id="minPrice" type="number" step="0.01" placeholder="0"/>
    </label>

    <label>
      Max Price:
      <input id="maxPrice" type="number" step="0.01" placeholder="1000"/>
    </label>

    <label>
      Sort:
      <select id="sortSelect">
        <option value="default">Default</option>
        <option value="price-asc">Price: Low → High</option>
        <option value="price-desc">Price: High → Low</option>
        <option value="title-asc">Title: A → Z</option>
      </select>
    </label>

    <button id="applyBtn">Apply</button>
    <button id="resetBtn">Reset</button>
  </div>
</header>


<!-- PRODUCT DISPLAY -->
<section id="products" class="products-grid"></section>


<script type="module">
// UPDATED product list WITH all working photo URLs
const products = [
  {
    "id": 1,
    "title": "Vintage Backpack",
    "price": 45.99,
    "category": "bags",
    "image": "https://cdn.pixabay.com/photo/2016/11/29/02/12/adventure-1868812_1280.jpg"
  },
  {
    "id": 2,
    "title": "Running Shoes",
    "price": 79.5,
    "category": "shoes",
    "image": "https://cdn.pixabay.com/photo/2016/11/29/12/54/people-1868623_1280.jpg"
  },
  {
    "id": 3,
    "title": "Wireless Headphones",
    "price": 129.99,
    "category": "electronics",
    "image": "https://cdn.pixabay.com/photo/2016/11/29/04/17/adult-1868750_1280.jpg"
  },
  {
    "id": 4,
    "title": "Graphic Tee",
    "price": 19.99,
    "category": "clothing",
    "image": "https://cdn.pixabay.com/photo/2017/08/01/08/29/tshirt-2564045_1280.jpg"
  },
  {
    "id": 5,
    "title": "Classic Wallet",
    "price": 24.0,
    "category": "accessories",
    "image": "https://cdn.pixabay.com/photo/2016/11/29/03/53/wallet-1868783_1280.jpg"
  }
];

// DOM Elements
const productsEl = document.getElementById("products");
const categoryFilterEl = document.getElementById("categoryFilter");
const minPriceEl = document.getElementById("minPrice");
const maxPriceEl = document.getElementById("maxPrice");
const sortSelectEl = document.getElementById("sortSelect");
const applyBtn = document.getElementById("applyBtn");
const resetBtn = document.getElementById("resetBtn");

let filtered = [...products];


// Populate Categories
const populateCategories = () => {
  const categories = [...new Set(products.map(p => p.category))];
  categories.forEach(cat => {
    const opt = document.createElement("option");
    opt.value = cat;
    opt.textContent = cat.charAt(0).toUpperCase() + cat.slice(1);
    categoryFilterEl.appendChild(opt);
  });
};


// Render Products
const renderProducts = items => {
  productsEl.innerHTML = items.map(({id,title,price,category,image}) => `
    <div class="card" data-id="${id}">
      <img src="${image}" alt="${title}">
      <h3>${title}</h3>
      <p>Category: ${category}</p>
      <p>Price: $${price.toFixed(2)}</p>
    </div>
  `).join("");
};


// Apply Filters + Sorting
const applyFilters = () => {
  const cat = categoryFilterEl.value;
  const min = parseFloat(minPriceEl.value) || 0;
  const max = parseFloat(maxPriceEl.value) || Infinity;
  const sort = sortSelectEl.value;

  filtered = products.filter(item => {
    const matchCat = (cat === "all") || item.category === cat;
    const matchPrice = item.price >= min && item.price <= max;
    return matchCat && matchPrice;
  });

  // Sorting
  if (sort === "price-asc") filtered.sort((a,b) => a.price - b.price);
  if (sort === "price-desc") filtered.sort((a,b) => b.price - a.price);
  if (sort === "title-asc") filtered.sort((a,b) => a.title.localeCompare(b.title));

  renderProducts(filtered);
};


// Reset All
const resetAll = () => {
  categoryFilterEl.value = "all";
  minPriceEl.value = "";
  maxPriceEl.value = "";
  sortSelectEl.value = "default";
  filtered = [...products];
  renderProducts(filtered);
};


// Event Listeners
applyBtn.addEventListener("click", applyFilters);
resetBtn.addEventListener("click", resetAll);


// Initialize Page
populateCategories();
renderProducts(products);

</script>

</body>
</html>
